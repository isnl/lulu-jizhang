<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>GBK编码测试</title>
</head>

<body>
    <h1>测试TextDecoder GBK支持</h1>
    <div id="result"></div>

    <script>
        const resultDiv = document.getElementById('result');

        try {
            const decoder = new TextDecoder('gbk');
            resultDiv.innerHTML = '<p style="color: green;">✅ 浏览器支持GBK编码</p>';
            console.log('TextDecoder支持GBK');
        } catch (e) {
            resultDiv.innerHTML = '<p style="color: red;">❌ 浏览器不支持GBK编码: ' + e.message + '</p>';
            console.error('TextDecoder不支持GBK:', e);
        }

        // 测试其他编码
        const encodings = ['utf-8', 'gb2312', 'gbk', 'gb18030', 'windows-1252'];
        const supported = [];
        const unsupported = [];

        encodings.forEach(enc => {
            try {
                new TextDecoder(enc);
                supported.push(enc);
            } catch (e) {
                unsupported.push(enc);
            }
        });

        resultDiv.innerHTML += '<h3>支持的编码:</h3><ul>' +
            supported.map(e => '<li>' + e + '</li>').join('') + '</ul>';
        resultDiv.innerHTML += '<h3>不支持的编码:</h3><ul>' +
            unsupported.map(e => '<li>' + e + '</li>').join('') + '</ul>';
    </script>
</body>

</html>